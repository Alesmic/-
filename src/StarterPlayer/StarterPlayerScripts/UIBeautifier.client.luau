-- Script: UIBeautifier.client.luau
-- å…¨å±€ UI ç¾åŒ–è„šæœ¬ (ç™½é‡‘åŠé€æ˜ç‰ˆ)

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- ================= ç™½é‡‘ç¾åŒ–é…ç½® =================
local STYLE = {
	CornerRadius = UDim.new(0, 10),

	-- [ä¿®æ”¹] è¾¹æ¡†è‰²ï¼šé‡‘å±é“¶
	StrokeColor = Color3.fromRGB(180, 180, 190),
	StrokeThickness = 2,

	-- [ä¿®æ”¹] èƒŒæ™¯è‰²ï¼šäº®ç™½/ææµ…ç°
	BackgroundColor = Color3.fromRGB(245, 245, 250),

	-- [ä¿®æ”¹] é€æ˜åº¦ï¼šç»ç’ƒæ„Ÿ
	BackgroundTransparency = 0.2,

	-- [ä¿®æ”¹] æ–‡å­—é€‚é…ï¼šæ·±è‰²æ–‡å­— (ç”¨äºæ›¿æ¢åŸæ¥çš„æµ…è‰²æ–‡å­—)
	DarkTextColor = Color3.fromRGB(40, 40, 50) 
}

local TARGET_GUIS = {
	"HUDGui", 
	"ResearchGui", 
	"GameGui",
	"RecyclingGUI" 
}

-- ================= ç¾åŒ–å‡½æ•° =================
local function BeautifyFrame(guiElement)
	if guiElement:FindFirstChild("IsBeautified") then return end

	-- æ ‡è®°å·²å¤„ç†
	local tag = Instance.new("BoolValue")
	tag.Name = "IsBeautified"
	tag.Parent = guiElement

	-- 1. å¤„ç† Frame (èƒŒæ™¯æ¿)
	if guiElement:IsA("Frame") and guiElement.BackgroundTransparency ~= 1 then

		-- åº”ç”¨åœ†è§’
		if not guiElement:FindFirstChildOfClass("UICorner") then
			local corner = Instance.new("UICorner")
			corner.CornerRadius = STYLE.CornerRadius
			corner.Parent = guiElement
		end

		-- åº”ç”¨æè¾¹
		if not guiElement:FindFirstChildOfClass("UIStroke") then
			local stroke = Instance.new("UIStroke")
			stroke.Color = STYLE.StrokeColor
			stroke.Thickness = STYLE.StrokeThickness
			stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			stroke.Transparency = 0.3
			stroke.Parent = guiElement
		end

		-- æ™ºèƒ½èƒŒæ™¯æ›¿æ¢
		-- å¦‚æœèƒŒæ™¯æ˜¯æ·±è‰²æˆ–ç°è‰²ï¼Œæ›¿æ¢ä¸ºç™½é‡‘é£æ ¼
		-- å¦‚æœæ˜¯é²œè‰³é¢œè‰²(å¦‚çº¢è‰²è¡€æ¡)ï¼Œåˆ™ä¿ç•™
		local h, s, v = guiElement.BackgroundColor3:ToHSV()
		if s < 0.2 then 
			guiElement.BackgroundColor3 = STYLE.BackgroundColor
			guiElement.BackgroundTransparency = STYLE.BackgroundTransparency

			-- ç™½é‡‘æ¸å˜ (äº®ç™½ -> é“¶ç™½)
			if not guiElement:FindFirstChildOfClass("UIGradient") then
				local gradient = Instance.new("UIGradient")
				gradient.Color = ColorSequence.new{
					ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
					ColorSequenceKeypoint.new(1, Color3.fromRGB(225, 225, 235))
				}
				gradient.Rotation = 60
				gradient.Parent = guiElement
			end
		end
	end

	-- 2. å¤„ç† TextLabel/TextButton (æ–‡å­—é€‚é…)
	-- å› ä¸ºèƒŒæ™¯å˜äº®äº†ï¼ŒåŸæ¥çš„ç™½è‰²æ–‡å­—å¯èƒ½ä¼šçœ‹ä¸æ¸…ï¼Œéœ€è¦å˜æˆæ·±è‰²
	if (guiElement:IsA("TextLabel") or guiElement:IsA("TextButton")) then
		local color = guiElement.TextColor3
		-- å¦‚æœæ–‡å­—æ˜¯ç™½è‰²æˆ–æµ…ç°ï¼Œæ”¹ä¸ºæ·±ç°è‰²
		if color.R > 0.8 and color.G > 0.8 and color.B > 0.8 then
			guiElement.TextColor3 = STYLE.DarkTextColor
		end

		-- ç»™æŒ‰é’®ä¹ŸåŠ åœ†è§’
		if guiElement:IsA("TextButton") and guiElement.BackgroundTransparency ~= 1 then
			if not guiElement:FindFirstChildOfClass("UICorner") then
				local corner = Instance.new("UICorner")
				corner.CornerRadius = UDim.new(0, 8)
				corner.Parent = guiElement
			end
		end
	end
end

-- ================= åˆå§‹åŒ–ä¸ç›‘å¬ =================
local function Init()
	task.wait(1) 

	for _, guiName in ipairs(TARGET_GUIS) do
		local gui = playerGui:WaitForChild(guiName, 5)
		if gui then
			print("ğŸ¨ æ­£åœ¨åº”ç”¨ç™½é‡‘ä¸»é¢˜: " .. guiName)

			for _, desc in pairs(gui:GetDescendants()) do
				BeautifyFrame(desc)
			end

			gui.DescendantAdded:Connect(BeautifyFrame)
		end
	end
end

Init()